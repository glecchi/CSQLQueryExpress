# CSQLQueryExpress

**CSQLQueryExpress** is a C# library designed to compile TSQL code, providing developers with the utmost flexibility to write expressions in C# that closely resemble TSQL syntax.  

Note that while CSQLQueryExpress handles the compilation of TSQL code, the execution is delegated to any ORM such as Dapper.

### ***Please note that this library is intended exclusively for use in non-production environments.***

### **Example**

Here's a simple example to demonstrate how to use CSQLQueryExpress with Dapper:

```csharp
using CSQLQueryExpress;
using Dapper;
using System.Data.SqlClient;
using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;

class Program
{
    static void Main()
    {
        SQLQuerySelect<Users> query = 
            new SQLQuery()
                .From<Users>()
                .Where(u => u.Age > 30)
                .Select(u => u.All());

        var tSqlQuery = query.Compile();

        var statement = tSqlQuery.Statement;
        var parameters = tSqlQuery.Parameters.ToDictionary(p => p.Name, p => p.Value);

        using (var connection = new SqlConnection("YourConnectionString"))
        {
            connection.Open();

            var result = connection.Query<Users>(statement, parameters);
            foreach (var user in result)
            {
                Console.WriteLine($"{user.UserID} - {user.FirstName} - {user.LastName} - {user.Age}");
            }
        }
    }
}

[Table("Users", Schema = "dbo")]
public class Users : ISQLQueryEntity
{
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    [Column("EmployeeID")]
    public int UserID { get; set; }
    
    [Required]
    [Column("FirstName")]
    public string FirstName { get; set; }
    
    [Required]
    [Column("LastName")]
    public string LastName { get; set; }
    	
    [Column("Age")]
    public int Age { get; set; }
}
```

## CSQLQueryExpress.Scaffolding

**CSQLQueryExpress.Scaffolding** is a C# [NuGet library](https://www.nuget.org/packages/CSQLQueryExpress.Scaffolding) designed to compile the data model for CSQLQueryExpress from the database schema.

## Note

**Compile and verify generated statements from the library:** Compile and test the TSQL statements generated by the library. The library translates the query you write respecting the expressions used. Some expressions can be used in different contexts, the library is not able to discern the intention of the writer, therefore the control both in the writing and verification phases lies with the developer.
